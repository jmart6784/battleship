(()=>{"use strict";const i=(i,s)=>(i=Math.ceil(i),s=Math.floor(s),Math.floor(Math.random()*(s-i+1))+i),s=()=>{const s=[{id:1,ship1:["3B","3C","3D","3E"],ship2:["7E","8E","9E"],ship3:["1F","1G","1H"],ship4:["10J","10I"],ship5:["6C","6B"],ship6:["5H","5G"],ship7:["10C"],ship8:["7H"],ship9:["1C"],ship10:["5E"]},{id:2,ship1:["6I","7I","8I","9I"],ship2:["9B","9C","9D"],ship3:["2H","3H","4H"],ship4:["1B","2B"],ship5:["4A","4B"],ship6:["1E","1F"],ship7:["6E"],ship8:["7B"],ship9:["4F"],ship10:["8F"]},{id:3,ship1:["5D","5E","5F","5G"],ship2:["1D","2D","3D"],ship3:["9B","9C","9D"],ship4:["2J","3J"],ship5:["7I","8I"],ship6:["4A","4B"],ship7:["1G"],ship8:["10G"],ship9:["7A"],ship10:["3H"]},{id:4,ship1:["2I","3I","4I","5I"],ship2:["7F","8F","9F"],ship3:["8A","9A","10A"],ship4:["1B","1C"],ship5:["5D","5E"],ship6:["8I","8J"],ship7:["4A"],ship8:["8C"],ship9:["3E"],ship10:["5G"]},{id:5,ship1:["6D","6E","6F","6G"],ship2:["2H","2I","2J"],ship3:["9E","9F","9G"],ship4:["9A","8A"],ship5:["2C","3C"],ship6:["4I","5I"],ship7:["8I"],ship8:["1A"],ship9:["10J"],ship10:["5B"]},{id:6,ship1:["6J","7J","8J","9J"],ship2:["7C","8C","9C"],ship3:["5E","5F","5G"],ship4:["8F","8G"],ship5:["9A","10A"],ship6:["4I","5I"],ship7:["7A"],ship8:["3B"],ship9:["2H"],ship10:["10H"]},{id:7,ship1:["10D","10E","10F","10G"],ship2:["2A","3A","4A"],ship3:["6E","6F","6G"],ship4:["1E","1F"],ship5:["8I","8J"],ship6:["3D","4D"],ship7:["4I"],ship8:["8C"],ship9:["9A"],ship10:["3G"]},{id:8,ship1:["2F","3F","4F","5F"],ship2:["8G","9G","10G"],ship3:["6B","6C","6D"],ship4:["3B","4B"],ship5:["6H","6I"],ship6:["1J","2J"],ship7:["4D"],ship8:["9E"],ship9:["4I"],ship10:["8C"]},{id:9,ship1:["7A","8A","9A","10A"],ship2:["3A","4A","5A"],ship3:["8J","9J","10J"],ship4:["6I","6J"],ship5:["1A","1B"],ship6:["2J","3J"],ship7:["4F"],ship8:["7D"],ship9:["6F"],ship10:["4C"]},{id:10,ship1:["4E","5E","6E","7E"],ship2:["8A","8B","8C"],ship3:["2D","2E","2F"],ship4:["8G","9G"],ship5:["1H","2H"],ship6:["6A","6B"],ship7:["2B"],ship8:["4G"],ship9:["5J"],ship10:["10C"]}];return s[i(0,s.length-1)]},p=i=>({coords:i}),h=(s,p,h)=>{let e=["1","2","3","4","5","6","7","8","9","10"],l=["A","B","C","D","E","F","G","H","I","J"],o=e[s]+l[p];if(h.moves.includes(o)){for(;h.moves.includes(o);)o=e[i(0,9)]+l[i(0,9)];return o}return o},e=(i,s,p,h,e,l)=>({name:i,isTurn:s,moves:p,ships:h,tiles:e,totalHP:l,aiMove:i=>{let s=document.querySelector(`[name="player1 ${i}"]`);return{player:s.name.split(" ")[0],coord:i,isEmpty:!s.classList[1],tile:s}}});let l=document.querySelectorAll(".p1-board-tile"),o=document.querySelectorAll(".p2-board-tile"),t=s(),r=s();for(;t.id===r.id;)t=s(),r=s();let a=p(t.ship1),c=p(t.ship2),n=p(t.ship3),d=p(t.ship4),u=p(t.ship5),E=p(t.ship6),m=p(t.ship7),A=p(t.ship8),y=p(t.ship9),I=p(t.ship10),C=p(r.ship1),B=p(r.ship2),F=p(r.ship3),f=p(r.ship4),J=p(r.ship5),G=p(r.ship6),H=p(r.ship7),D=p(r.ship8),b=p(r.ship9),g=p(r.ship10),T=e("player1",!0,[],[a,c,n,d,u,E,m,A,y,I],l,20),k=e("player2",!1,[],[C,B,F,f,J,G,H,D,b,g],o,20);(()=>{T.tiles.forEach((i=>{i.onclick=()=>{let p=i.name.split(" "),h=p[0],e=p[1],l=!i.classList[1];T.isTurn||(i.disabled=!0,s({player:h,coord:e,isEmpty:l,tile:i}))}})),k.tiles.forEach((i=>{i.onclick=()=>{let p=i.name.split(" "),h=p[0],e=p[1],l=!i.classList[1];k.isTurn||(i.disabled=!0,s({player:h,coord:e,isEmpty:l,tile:i})),i.disabled=!0}}));const s=l=>{if(l.isEmpty)if(T.isTurn){T.moves.push(l.coord),T.isTurn=!1,k.isTurn=!0,l.tile.style.backgroundColor="gray";let p=h(i(0,9),i(0,9),k),e=k.aiMove(p);s(e)}else k.isTurn&&(k.moves.push(l.coord),T.isTurn=!0,k.isTurn=!1,l.tile.style.backgroundColor="gray");else if(l.tile.style.backgroundColor="red",T.isTurn)1===k.totalHP?e(T.name):k.totalHP-=1;else if(k.isTurn)if(20===p())e(k.name);else{let p=h(i(0,9),i(0,9),k),e=k.aiMove(p);s(e)}},p=()=>{let i=0;return l.forEach((s=>{"red"===s.style.backgroundColor&&i++})),i},e=i=>{T.tiles.forEach((i=>{i.disabled=!0})),k.tiles.forEach((i=>{i.disabled=!0})),document.getElementById("winner-name").innerHTML="player1"===i?"You Win!":"Enemy has won!",document.getElementById("winner-popup").style.display="block",document.getElementById("game-reset").addEventListener("click",(()=>{location.reload()}))};return{placePieces:()=>{T.ships.forEach((i=>{i.coords.forEach((i=>{T.tiles.forEach((s=>{s.name.split(" ")[1]===i&&(s.style.backgroundColor="blue",s.classList+=" occupied")}))}))})),k.ships.forEach((i=>{i.coords.forEach((i=>{k.tiles.forEach((s=>{s.name.split(" ")[1]===i&&(s.style.backgroundColor="blue",s.classList+=" occupied")}))}))}))},receiveAttack:s}})().placePieces()})();